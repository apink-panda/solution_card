<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apink Solution Cards</title>
    <style>
        :root {
            --card-width: 6.3cm;
            --card-height: 8.8cm;
            --bg-color: #F8C3D2;
            --text-color: #5A5A5A;

            /* Member Pattern Colors */
            --color-chorong: #F08080;
            --color-bomi: #FFD700;
            --color-eunji: #556B2F;
            --color-namjoo: #9370DB;
            --color-hayoung: #FFA500;

            /* Member Background Colors (Pastel) */
            --bg-chorong: #f08080;
            --bg-bomi: #ffd800;
            --bg-eunji: #566c2f;
            --bg-namjoo: #9371dc;
            --bg-hayoung: #ffa503;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #222;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #app {
            text-align: center;
            width: 100%;
            max-width: 500px;
            perspective: 1000px;
        }

        .screen {
            padding: 20px;
            transition: opacity 0.5s;
        }

        .hidden {
            display: none !important;
            opacity: 0;
        }

        input[type="text"] {
            width: 80%;
            padding: 15px;
            font-size: 16px;
            border-radius: 25px;
            border: none;
            outline: none;
            text-align: center;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            border: none;
            border-radius: 25px;
            color: #fff;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s;
        }

        button:active {
            transform: scale(0.95);
        }

        .card {
            width: var(--card-width);
            height: var(--card-height);
            background-color: var(--bg-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            box-sizing: border-box;
            border-radius: 10px;
            margin: 0 auto;
            background-size: cover;
            transition: background-color 0.5s;
        }

        .title {
            font-family: "Didot", "Bodoni MT", "Times New Roman", serif;
            font-size: 24px;
            letter-spacing: -1px;
            color: var(--text-color);
            margin-top: 5px;
            z-index: 10;
            text-transform: uppercase;
            text-align: center;
            width: 100%;
            transform: scaleY(1.2);
        }

        .subtitle {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 6px;
            font-weight: bold;
            color: #444;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            white-space: nowrap;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }

        .logo {
            margin-bottom: 5px;
            z-index: 10;
            width: auto; /* fit content */
            opacity: 0.8;
            display: flex;
            flex-direction: column; /* stack heart + panda */
            align-items: center; /* center horizontally */
            justify-content: center; /* center vertically within container */
            gap: 6px; /* small space between icons */
        }

        /* Ensure vector and image icons don't have inline spacing */
        .logo svg, .logo img {
            display: block;
        }

        /* Pattern Decoration */
        .decoration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* Member background mapping: set card back color per member */
        .park_chorong { --bg-color: var(--bg-chorong); }
        .yoon_bomi { --bg-color: var(--bg-bomi); }
        .jeong_eunji { --bg-color: var(--bg-eunji); }
        .kim_namjoo { --bg-color: var(--bg-namjoo); }
        .oh_hayoung { --bg-color: var(--bg-hayoung); }

        /* --- Deck / Shuffling Animation --- */
        #deck-container {
            position: relative;
            width: 100%;
            height: 60vh;
            margin-top: 20px;
            overflow: visible;
        }

        .deck-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            will-change: transform;
        }

        /* --- Result Reveal --- */
        #result-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .revealed-card-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .revealed-card {
            animation: cardFlip 1.5s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
        }

        .result-text {
            margin-top: 20px;
            text-align: center;
        }

        .card-number { font-size: 14px; color: #ddd; }
        .korean-text { font-size: 16px; margin-top: 8px; }
        .chinese-text { font-size: 14px; color: #ccc; }
        .member-name { font-size: 12px; color: #bbb; margin-top: 6px; }

        /* Inner Card Text Styles */
        .card-content {
            z-index: 10;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 8px;
            padding: 0 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .card-number-inner { font-size: 8px; color: rgba(0,0,0,0.3); text-transform: uppercase; }
        .korean-text-inner { font-size: 16px; font-weight: bold; color: var(--text-color); line-height: 1.3; }
        .chinese-text-inner { font-size: 12px; color: rgba(0,0,0,0.5); }
        .member-name-inner { font-size: 10px; color: rgba(0,0,0,0.4); margin-top: 4px; font-weight: bold; }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        /* Transition Animation for Result */
        @keyframes cardFlip {
            0% { opacity: 0; transform: rotateY(90deg) scale(0.5); }
            50% { opacity: 0.5; }
            100% { opacity: 1; transform: rotateY(0deg) scale(1); }
        }

        @media (max-width: 600px) {
            :root { --card-width: 70vw; --card-height: 98vw; }
            body { overflow-y: auto; height: auto; }
            #app { max-width: 100%; padding: 10px; height: auto; overflow-x: hidden; }
            .title { font-size: 18px; }
            .subtitle { font-size: 4px; }
            input[type="text"] { width: 90%; }
        }
        /* iPad Pro scaling: enlarge fonts and proportional layout */
        @media (min-width: 768px) and (max-width: 1366px) {
            :root {
                /* Scale card size proportionally to viewport width */
                --card-width: 52vw;
                --card-height: calc(52vw * 1.396825);
            }

            body { font-size: 18px; }
            #app { max-width: 900px; }
            #deck-container { height: 65vh; }

            /* Input Screen scaling (3x) */
            #input-screen h1 { font-size: 96px; margin-bottom: 30px; }
            #input-screen p { font-size: 48px; margin-bottom: 45px; }
            #input-screen button { font-size: 54px; padding: 25px 60px; border-radius: 50px; }

            /* Shuffling Screen scaling (2x) */
            #deck-screen h2 { font-size: 48px; margin-bottom: 30px; }
            #instruction-text { font-size: 36px; }

            .title { font-size: 32px; }
            .subtitle { font-size: 8px; }

            input[type="text"] { font-size: 18px; padding: 18px; }
            button { font-size: 20px; padding: 14px 34px; }

            /* Scale logo images for iPad */
            .logo img[alt="Apink"] { width: 60px; height: 48px; }
            .logo img[alt="Panda"] { width: 72px; height: 72px; }

            .card-number { font-size: 16px; }
            .korean-text { font-size: 18px; }
            .chinese-text { font-size: 16px; }
            .member-name { font-size: 14px; }

            /* Scale inner card text for iPad - Much larger and light colored */
            .card-content { gap: 25px; }
            .card-number-inner { font-size: 20px; color: rgba(255, 255, 255, 0.6); }
            .korean-text-inner { font-size: 48px; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
            .chinese-text-inner { font-size: 32px; color: rgba(255, 255, 255, 0.8); }
            .member-name-inner { font-size: 24px; color: rgba(255, 255, 255, 0.7); }
        }
    </style>
</head>

<body>

    <div id="app">
        <!-- Screen 1: Input (Korean-only) -->
        <div id="input-screen" class="screen">
            <h1>Apink ì†”ë£¨ì…˜ ë¶</h1>
            <p>ë§ˆìŒì†ìœ¼ë¡œ ì§ˆë¬¸ì„ ìƒê°í•´ë³´ì„¸ìš”...</p>
            <button onclick="startShuffling()">ì‹œì‘í•˜ê¸°</button>
        </div>

        <!-- Screen 2: Deck / Shuffling -->
        <div id="deck-screen" class="screen hidden">
            <h2>ì¹´ë“œ ì„ëŠ” ì¤‘...</h2>
            <div id="deck-container"></div>
            <div id="instruction-text" class="hidden" style="margin-top: 20px;">ì§ê°ìœ¼ë¡œ ì¹´ë“œë¥¼ í•˜ë‚˜ ê³ ë¥´ì„¸ìš”</div>
        </div>

        <!-- Screen 3: Result -->
        <div id="result-screen" class="screen hidden">
            <div class="revealed-card-container">
                <div id="final-card" class="card"></div>
            </div>

            <div class="result-text">
                <br>
                <button onclick="resetApp()">ë‹¤ì‹œ ë¬¼ì–´ë³´ê¸°</button>
            </div>
        </div>

        <div class="footer" style="margin-top: 20px; font-size: 12px; color: #888; text-align: center;">
            Apink Panda íŒ¬ ì œì‘. ì €ì‘ê¶Œ ë¬¸ì œ ì‹œ ì—°ë½ ë°”ëë‹ˆë‹¤.
        </div>
    </div>

    <template id="card-inner-template">
        <div class="title">The Pink Tale</div>
        <div class="card-content">
            <div class="card-number-inner"></div>
            <div class="korean-text-inner"></div>
            <div class="chinese-text-inner"></div>
            <div class="member-name-inner"></div>
        </div>
        <div class="decoration"></div>
        <div class="logo">
            <!-- Apink heart image (transparent) -->
            <img src="apink.png" alt="Apink" width="50" height="40" />

            <!-- Panda image (64x64) -->
            <img src="panda_cropped.png" width="64" height="64" alt="Panda" />
        </div>
    </template>

    <script>
        // ä¿æŒæŠ½å¡å…§å®¹è³‡æ–™ä¸è®Šï¼ˆéŸ“æ–‡/ä¸­æ–‡åŸæ¨£ï¼‰
        const allCards = [{ "number": 1, "member": "park_chorong", "korean": "ì´ ë˜í•œ ì§€ë‚˜ê°€ë¦¬ë¼", "chinese": "é€™ä¹Ÿå°‡æœƒéå»", "filename": "01_park_chorong.jpg" }, { "number": 2, "member": "park_chorong", "korean": "ê°€ë”ì€ í¬ê¸°í•˜ëŠ” ê²ƒë„ ë°©ë²•", "chinese": "æœ‰æ™‚å€™æ”¾æ£„ä¹Ÿæ˜¯ä¸€ç¨®æ–¹æ³•", "filename": "02_park_chorong.jpg" }, { "number": 3, "member": "park_chorong", "korean": "ì§€ê¸ˆ ì´ ìˆœê°„ì´ ë°”ë¡œ ê¸°ì  ê°™ì€ ì´ì•¼ê¸°!", "chinese": "æ­¤åˆ»æ­£æ˜¯å¦‚å¥‡è¹Ÿèˆ¬çš„æ•…äº‹ï¼", "filename": "03_park_chorong.jpg" }, { "number": 4, "member": "park_chorong", "korean": "ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒë³´ë‹¨, ê·¸ ë§ˆìŒì„ ì´í•´í•˜ëŠ” ê²ƒì´ ë¨¼ì €!", "chinese": "èˆ‡å…¶è§£æ±ºå•é¡Œï¼Œä¸å¦‚å…ˆç†è§£é‚£ä»½å¿ƒæ„ï¼", "filename": "04_park_chorong.jpg" }, { "number": 5, "member": "park_chorong", "korean": "ì§€ê¸ˆ ë‹¹ì¥ í•´ë³´ì!", "chinese": "ç¾åœ¨ç«‹åˆ»è©¦è©¦çœ‹å§ï¼", "filename": "05_park_chorong.jpg" }, { "number": 6, "member": "park_chorong", "korean": "ëˆ„êµ°ê°€ì˜ ì¡°ì–¸ì´ í•„ìš”í•œ ë‚ ", "chinese": "éœ€è¦æŸäººå»ºè­°çš„æ—¥å­", "filename": "06_park_chorong.jpg" }, { "number": 7, "member": "park_chorong", "korean": "ìˆœì„œë¥¼ í•œë²ˆ ë°”ê¿”ë³¼ê¹Œ?", "chinese": "è¦ä¸è¦è©¦è‘—æ›å€‹é †åºï¼Ÿ", "filename": "07_park_chorong.jpg" }, { "number": 8, "member": "park_chorong", "korean": "ë„ˆë¬´ ì°¸ì§€ë§ˆì„¸ìš”.", "chinese": "ä¸è¦å¤ªéå¿è€ã€‚", "filename": "08_park_chorong.jpg" }, { "number": 9, "member": "park_chorong", "korean": "ë‹¬ë‹¬í•œê²Œ í•„ìš”í•œ ì§€ê¸ˆ!", "chinese": "ç¾åœ¨éœ€è¦ä¾†é»ç”œçš„ï¼", "filename": "09_park_chorong.jpg" }, { "number": 10, "member": "park_chorong", "korean": "ì§€ê¸ˆ ì´ ìˆœê°„ì€ ëª¨ë‘ ì²˜ìŒì´ì ë§ˆì§€ë§‰", "chinese": "æ­¤åˆ»æ—¢æ˜¯æœ€åˆä¹Ÿæ˜¯æœ€å¾Œ", "filename": "10_park_chorong.jpg" }, { "number": 11, "member": "yoon_bomi", "korean": "%% (ì‘ì‘)", "chinese": "%% (å—¯å—¯)", "filename": "11_yoon_bomi.jpg" }, { "number": 12, "member": "yoon_bomi", "korean": "í•œë°œì§ ë¬¼ëŸ¬ì„œì„œ ìƒê°í•´ë³´ëŠ”ê±´ ì–´ë•Œ?", "chinese": "è©¦è‘—é€€å¾Œä¸€æ­¥æ€è€ƒå¦‚ä½•ï¼Ÿ", "filename": "12_yoon_bomi.jpg" }, { "number": 13, "member": "yoon_bomi", "korean": "ë„ˆìì‹ ì„ ë¯¿ì–´!", "chinese": "ç›¸ä¿¡ä½ è‡ªå·±ï¼", "filename": "13_yoon_bomi.jpg" }, { "number": 14, "member": "yoon_bomi", "korean": "ì¡°ê¸ˆ ì‰¬ì–´ë³´ëŠ” ê±´ ì–´ë•Œ?", "chinese": "ç¨å¾®ä¼‘æ¯ä¸€ä¸‹å¦‚ä½•ï¼Ÿ", "filename": "14_yoon_bomi.jpg" }, { "number": 15, "member": "yoon_bomi", "korean": "ê´œì°®ì„ê±°ì•¼, í•´ë´", "chinese": "æœƒæ²’äº‹çš„ï¼Œè©¦è©¦çœ‹å§", "filename": "15_yoon_bomi.jpg" }, { "number": 16, "member": "yoon_bomi", "korean": "ì´ì œëŠ” ë”ì´ìƒ ë¬¼ëŸ¬ì„¤ê³³ì´ ì—†ë‹¤.", "chinese": "å·²ç¶“æ²’æœ‰é€€è·¯äº†ã€‚", "filename": "16_yoon_bomi.jpg" }, { "number": 17, "member": "yoon_bomi", "korean": "ìŠ¬í¼í•˜ì§€ë§ˆ NoNoNo!", "chinese": "ä¸è¦æ‚²å‚· NoNoNo!", "filename": "17_yoon_bomi.jpg" }, { "number": 18, "member": "yoon_bomi", "korean": "ëˆˆê°ê³  ë‹¤ì‹œ ìƒê°í•´ë´", "chinese": "é–‰ä¸Šçœ¼å†æƒ³ä¸€æƒ³", "filename": "18_yoon_bomi.jpg" }, { "number": 19, "member": "yoon_bomi", "korean": "í¬ê¸°í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ê²°êµ­ í•´ë‚¼ ìˆ˜ ìˆì–´", "chinese": "åªè¦ä¸æ”¾æ£„ï¼Œçµ‚ç©¶èƒ½åšåˆ°", "filename": "19_yoon_bomi.jpg" }, { "number": 20, "member": "yoon_bomi", "korean": "ë•Œë¡œëŠ” ì˜ë¯¸ì—†ëŠ” ì‘ì€ ê²ƒì—ì„œ ì‹œì‘ë˜ê¸°ë„", "chinese": "æœ‰æ™‚ä¹Ÿå§‹æ–¼æ¯«ç„¡æ„ç¾©çš„å°äº‹", "filename": "20_yoon_bomi.jpg" }, { "number": 21, "member": "jeong_eunji", "korean": "ê³§ ë§Œë‚˜ê²Œ ë ê±°ì•¼ ë„ˆì˜ ê°€ëŠ¥ì„±", "chinese": "å¾ˆå¿«å°±æœƒé‡è¦‹ä½ çš„å¯èƒ½æ€§", "filename": "21_jeong_eunji.jpg" }, { "number": 22, "member": "jeong_eunji", "korean": "ë„ˆë¥¼ ìˆëŠ” ëª¨ìŠµ ê·¸ëŒ€ë¡œ ë¯¿ì–´ë´.", "chinese": "ç›¸ä¿¡ä½ åŸæœ¬çš„æ¨£å­ã€‚", "filename": "22_jeong_eunji.jpg" }, { "number": 23, "member": "jeong_eunji", "korean": "ì–´ì°¨í”¼ ì¼ì–´ë‚  ì¼ë“¤ì€ ì¼ì–´ë‚˜. ê·¸ ì†ì—ì„œ ì–´ë–¤ì„ íƒì„ í• ë˜?", "chinese": "åæ­£è©²ç™¼ç”Ÿçš„äº‹çµ‚æœƒç™¼ç”Ÿï¼Œåœ¨å…¶ä¸­ä½ è¦åšä»€éº¼é¸æ“‡ï¼Ÿ", "filename": "23_jeong_eunji.jpg" }, { "number": 24, "member": "jeong_eunji", "korean": "ë‚˜ìœì ë³´ë‹¤ ì¢‹ì€ì ì´ ë” ë§ë‹¤.", "chinese": "å„ªé»æ¯”ç¼ºé»æ›´å¤šã€‚", "filename": "24_jeong_eunji.jpg" }, { "number": 25, "member": "jeong_eunji", "korean": "í˜ë“¤ë©´ ì¡°ê¸ˆ ì‰¬ì–´ë„ ê´œì°®ì•„.", "chinese": "ç´¯çš„è©±ç¨å¾®ä¼‘æ¯ä¹Ÿæ²’é—œä¿‚ã€‚", "filename": "25_jeong_eunji.jpg" }, { "number": 26, "member": "jeong_eunji", "korean": "ì˜¤ëŠ˜ í•˜ë£¨ì¯¤ì€ ëŒ€ì¶©~ ì–´ë•Œ.", "chinese": "ä»Šå¤©ä¸€å¤©ç¨å¾®éš¨ä¾¿ä¸€é»ï½å¦‚ä½•ã€‚", "filename": "26_jeong_eunji.jpg" }, { "number": 27, "member": "jeong_eunji", "korean": "ê±±ì •í–ˆë˜ ê²ƒë³´ë‹¤ ê´œì°®ì„ê±°ì•¼.", "chinese": "æœƒæ¯”æ“”å¿ƒçš„æƒ…æ³é‚„å¥½çš„ã€‚", "filename": "27_jeong_eunji.jpg" }, { "number": 28, "member": "jeong_eunji", "korean": "ë„ˆë¬´ ë§ˆìŒì— ë‹´ì•„ë‘ì§€ë§ˆ.", "chinese": "ä¸è¦å¤ªæ”¾åœ¨å¿ƒä¸Šã€‚", "filename": "28_jeong_eunji.jpg" }, { "number": 29, "member": "jeong_eunji", "korean": "ê³¼ê°íˆ ë¬´ì‹œí•´ë„ ê´œì°®ì•„", "chinese": "å¤§è†½åœ°ç„¡è¦–ä¹Ÿæ²’é—œä¿‚", "filename": "29_jeong_eunji.jpg" }, { "number": 30, "member": "jeong_eunji", "korean": "ì, ì§€ê¸ˆë¶€í„° ì ì‹œ. ë”°ë¼í•´ë³´ì. 1. 2. 3. 4. 5. ì–´ë•Œ? ì‹œì‘ í•´ë³¼ ìˆ˜ ìˆê² ì–´?", "chinese": "ä¾†ï¼Œç¾åœ¨é–‹å§‹ç¨å¾®è·Ÿè‘—åšã€‚1. 2. 3. 4. 5. å¦‚ä½•ï¼Ÿèƒ½è©¦è‘—é–‹å§‹å—ï¼Ÿ", "filename": "30_jeong_eunji.jpg" }, { "number": 31, "member": "kim_namjoo", "korean": "ì‹œê°„ì´ ì•½ ğŸ’Š", "chinese": "æ™‚é–“æ˜¯è§£è—¥ ğŸ’Š", "filename": "31_kim_namjoo.jpg" }, { "number": 32, "member": "kim_namjoo", "korean": "í”¼í•  ìˆ˜ ì—†ë‹¤ë©´ ì¦ê²¨..", "chinese": "é¿ä¸é–‹çš„è©±å°±äº«å—å§..", "filename": "32_kim_namjoo.jpg" }, { "number": 33, "member": "kim_namjoo", "korean": "ë‹¹ì—°í•œ ê²ƒì€ ì—†ë‹¤!", "chinese": "æ²’ä»€éº¼æ˜¯ç†æ‰€ç•¶ç„¶çš„ï¼", "filename": "33_kim_namjoo.jpg.jpg" }, { "number": 34, "member": "kim_namjoo", "korean": "ë•Œë¡œëŠ” Slowly.. ëŒì•„ê°€ë„ ì¢‹ì•„.", "chinese": "æœ‰æ™‚ Slowly.. ç¹è·¯ä¹Ÿæ²’é—œä¿‚ã€‚", "filename": "34_kim_namjoo.jpg.jpg" }, { "number": 35, "member": "kim_namjoo", "korean": "ë‹¨ìˆœí•˜ê²Œ ìƒê°í•˜ë¼.", "chinese": "å–®ç´”åœ°æ€è€ƒå§ã€‚", "filename": "35_kim_namjoo.jpg.jpg" }, { "number": 36, "member": "kim_namjoo", "korean": "ë­ë“ ì§€ ì˜ë ê²ƒ ê°™ì€ ëŠë‚Œì ì¸ ëŠë‚Œâ™¡", "chinese": "ä¸ç®¡ä»€éº¼éƒ½æœƒé †åˆ©çš„æ„Ÿè¦ºä¸Šçš„æ„Ÿè¦ºâ™¡", "filename": "36_kim_namjoo.jpg.jpg" }, { "number": 37, "member": "kim_namjoo", "korean": "í˜„ì‹¤ì„ ë°›ì•„ë“¤ì´ë¼..ã…", "chinese": "æ¥å—ç¾å¯¦å§..å“ˆ", "filename": "37_kim_namjoo.jpg.jpg" }, { "number": 38, "member": "kim_namjoo", "korean": "ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì€ ì—†ì–´!", "chinese": "æ²’æœ‰ä»€éº¼æ˜¯ä¸æœƒè®Šçš„ï¼", "filename": "38_kim_namjoo.jpg.jpg" }, { "number": 39, "member": "kim_namjoo", "korean": "ì£¼ë³€ ì‹œì„ ì€ ì‹ ê²½ ì“°ì§€ ë§ë¼^^", "chinese": "ä¸è¦åœ¨æ„å‘¨åœçš„è¦–ç·š^^", "filename": "39_kim_namjoo.jpg.jpg" }, { "number": 40, "member": "kim_namjoo", "korean": "ì§€ê¸ˆì´ ê°€ì¥ ì Šì–´! Do it Now!", "chinese": "ç¾åœ¨æ˜¯æœ€å¹´è¼•çš„æ™‚åˆ»ï¼Do it Now!", "filename": "40_kim_namjoo.jpg.jpg" }, { "number": 41, "member": "oh_hayoung", "korean": "ì˜¤ëŠ˜ì€ í•œë°œì§ ë¬¼ëŸ¬ë‚˜ë³´ê¸°", "chinese": "ä»Šå¤©è©¦è‘—é€€å¾Œä¸€æ­¥", "filename": "41_oh_hayoung.jpg" }, { "number": 42, "member": "oh_hayoung", "korean": "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„!", "chinese": "ä¸å®Œç¾ä¹Ÿæ²’é—œä¿‚ï¼", "filename": "42_oh_hayoung.jpg" }, { "number": 43, "member": "oh_hayoung", "korean": "ì§„ì§œë§Œ ì§„ì§œë¥¼ ì•Œì•„ë´ ì¤„ê±¸?", "chinese": "åªæœ‰çœŸçš„æ‰æœƒèªå‡ºçœŸçš„ï¼Ÿ", "filename": "43_oh_hayoung.jpg" }, { "number": 44, "member": "oh_hayoung", "korean": "ë„ˆë¬´ ì¡°ê¸‰í•˜ê²Œ ìƒê°í•˜ì§€ë§ˆ!", "chinese": "ä¸è¦å¤ªç„¦æ€¥ï¼", "filename": "44_oh_hayoung.jpg" }, { "number": 45, "member": "oh_hayoung", "korean": "ì‹œê°„ì„ ë˜ëŒë¦´ìˆ˜ëŠ” ì—†ì–´!", "chinese": "æ™‚é–“ç„¡æ³•å€’æµï¼", "filename": "45_oh_hayoung.jpg" }, { "number": 46, "member": "oh_hayoung", "korean": "ì¢€ ë” ìƒê°í•´ë´!", "chinese": "å†å¤šæƒ³ä¸€æƒ³ï¼", "filename": "46_oh_hayoung.jpg" }, { "number": 47, "member": "oh_hayoung", "korean": "ë§ˆìŒ ê°€ëŠ”ëŒ€ë¡œ í•˜ëŠ”ê±° ì–´ë•Œ??", "chinese": "éš¨å¿ƒæ‰€æ¬²åœ°åšå¦‚ä½•ï¼Ÿï¼Ÿ", "filename": "47_oh_hayoung.jpg" }, { "number": 48, "member": "oh_hayoung", "korean": "ì˜¤ëŠ˜ì€ ë‹¤ ìŠê³  ë– ë‚˜ì!!", "chinese": "ä»Šå¤©å¿˜æ‰ä¸€åˆ‡å‡ºç™¼å§ï¼ï¼", "filename": "48_oh_hayoung.jpg" }, { "number": 49, "member": "oh_hayoung", "korean": "ê±·ë‹¤ë³´ë©´ ë‹µì´ ë‚˜ì˜¬ê±°ì•¼!!", "chinese": "èµ°è‘—èµ°è‘—ç­”æ¡ˆæœƒå‡ºç¾çš„ï¼ï¼", "filename": "49_oh_hayoung.jpg" }, { "number": 50, "member": "oh_hayoung", "korean": "ê·¸ëƒ¥ ìŠì–´ë²„ë¦¬ì!!", "chinese": "å°±å¿˜äº†å§ï¼ï¼", "filename": "50_oh_hayoung.jpg" }];
        const members = ['park_chorong', 'yoon_bomi', 'jeong_eunji', 'kim_namjoo', 'oh_hayoung'];

        // Pick ONE member color for the back of ALL cards in this session
        const coverMember = members[Math.floor(Math.random() * members.length)];

        function initDeck() {
            const container = document.getElementById('deck-container');
            container.innerHTML = '';

            for (let i = 0; i < 50; i++) {
                const cardEl = document.createElement('div');
                cardEl.className = `card deck-card`;

                const template = document.getElementById('card-inner-template');
                cardEl.appendChild(template.content.cloneNode(true));

                const rot = (Math.random() - 0.5) * 5;
                cardEl.style.transform = `translate(-50%, -50%) rotate(${rot}deg)`;

                cardEl.onclick = () => drawCard(i);
                container.appendChild(cardEl);
            }
        }

        function startShuffling() {
            document.getElementById('input-screen').classList.add('hidden');
            document.getElementById('deck-screen').classList.remove('hidden');

            initDeck();

            const cards = document.querySelectorAll('.deck-card');
            let shuffleCount = 0;
            const maxShuffle = 20;

            const interval = setInterval(() => {
                cards.forEach(card => {
                    const x = (Math.random() - 0.5) * 200;
                    const y = (Math.random() - 0.5) * 200;
                    const rot = (Math.random() - 0.5) * 180;
                    card.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) rotate(${rot}deg)`;
                });

                shuffleCount++;
                if (shuffleCount >= maxShuffle) {
                    clearInterval(interval);

                    const totalCards = 50;
                    const angleRange = 120;
                    const startAngle = -60;
                    const radius = 220;
                    const pivotY = 180;

                    cards.forEach((card, idx) => {
                        card.style.transition = 'all 1.0s cubic-bezier(0.25, 0.1, 0.25, 1.0)';

                        const angle = startAngle + (idx * (angleRange / (totalCards - 1)));

                        const baseTransform = `translate(-50%, ${pivotY}px) rotate(${angle}deg) translate(0, -${radius}px)`;
                        const hoverTransform = `translate(-50%, ${pivotY}px) rotate(${angle}deg) translate(0, -${radius + 40}px) scale(1.1)`;

                        card.style.transform = baseTransform;
                        card.dataset.baseTransform = baseTransform;
                        card.dataset.hoverTransform = hoverTransform;

                        card.onmouseenter = () => {
                            card.style.transition = 'transform 0.2s ease';
                            card.style.transform = card.dataset.hoverTransform;
                            card.style.zIndex = 100;
                        };
                        card.onmouseleave = () => {
                            card.style.transition = 'transform 0.2s ease';
                            card.style.transform = card.dataset.baseTransform;
                            card.style.zIndex = 'auto';
                        };
                    });

                    const deckContainer = document.getElementById('deck-container');
                    let activeHoverCard = null;

                    const handleTouch = (evt) => {
                        // Only prevent default on move to allow clicks/taps to register
                        if (evt.type === 'touchmove' && evt.cancelable) evt.preventDefault();
                        const touch = evt.touches && evt.touches[0];
                        if (!touch) return;
                        const x = touch.clientX;
                        const y = touch.clientY;

                        let nearest = null;
                        let bestDist = Infinity;
                        cards.forEach((card) => {
                            const rect = card.getBoundingClientRect();
                            const cx = rect.left + rect.width / 2;
                            const cy = rect.top + rect.height / 2;
                            const dx = cx - x;
                            const dy = cy - y;
                            const dist = dx * dx + dy * dy;
                            if (dist < bestDist) {
                                bestDist = dist;
                                nearest = card;
                            }
                        });

                        if (nearest && nearest !== activeHoverCard) {
                            if (activeHoverCard) {
                                activeHoverCard.style.transition = 'transform 0.2s ease';
                                activeHoverCard.style.transform = activeHoverCard.dataset.baseTransform;
                                activeHoverCard.style.zIndex = 'auto';
                            }
                            nearest.style.transition = 'transform 0.2s ease';
                            nearest.style.transform = nearest.dataset.hoverTransform;
                            nearest.style.zIndex = 100;
                            activeHoverCard = nearest;
                        }
                    };

                    deckContainer.addEventListener('touchstart', handleTouch, { passive: false });
                    deckContainer.addEventListener('touchmove', handleTouch, { passive: false });
                    deckContainer.addEventListener('touchend', (evt) => {
                        if (activeHoverCard) {
                            // Trigger drawCard on tap
                            const cardsArray = Array.from(cards);
                            const clickedIndex = cardsArray.indexOf(activeHoverCard);
                            if (clickedIndex !== -1) {
                                drawCard(clickedIndex);
                            }

                            activeHoverCard.style.transition = 'transform 0.2s ease';
                            activeHoverCard.style.transform = activeHoverCard.dataset.baseTransform;
                            activeHoverCard.style.zIndex = 'auto';
                            activeHoverCard = null;
                        }
                    }, { passive: true });

                    document.getElementById('instruction-text').classList.remove('hidden');
                }
            }, 100);
        }

        function drawCard(clickedIndex) {
            const randomCard = allCards[Math.floor(Math.random() * allCards.length)];

            document.getElementById('deck-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            const finalCard = document.getElementById('final-card');
            finalCard.className = `card ${randomCard.member}`;
            finalCard.innerHTML = '';
            const template = document.getElementById('card-inner-template');
            finalCard.appendChild(template.content.cloneNode(true));

            setTimeout(() => { finalCard.classList.add('revealed-card'); }, 10);

            setTimeout(() => {
                const numEl = finalCard.querySelector('.card-number-inner');
                const korEl = finalCard.querySelector('.korean-text-inner');
                const chiEl = finalCard.querySelector('.chinese-text-inner');
                const memEl = finalCard.querySelector('.member-name-inner');
                
                if(numEl) numEl.innerText = `Card No. ${randomCard.number}`;
                if(korEl) korEl.innerText = randomCard.korean;
                if(chiEl) chiEl.innerText = randomCard.chinese;
                let niceName = randomCard.member.replace('_', ' ').toUpperCase();
                if(memEl) memEl.innerText = niceName;
            }, 750);
        }

        function resetApp() {
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('input-screen').classList.remove('hidden');
            document.getElementById('instruction-text').classList.add('hidden');
        }

    </script>
</body>

</html>
